html_content = f"""
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Roblox FFlag Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  /* styles here */
</style>
</head>
<body>
<header>
  <h1>Roblox Client FFlag Tracker</h1>
</header>

<section>
  <div class="stats">
    <div class="badge added">✅ Added: <span id="flags-added">{added}</span></div>
    <div class="badge removed">❌ Removed: <span id="flags-removed">{removed}</span></div>
  </div>

  <p class="last-run">Last Run: <span id="last-run">{last_run}</span></p>

  <input type="text" id="searchInput" placeholder="Search flags...">

  <h2>📊 Latest Full Report</h2>
  <div class="report-container">
    <iframe src="FFlag_Report.html" id="reportFrame"></iframe>
  </div>

  <canvas id="trendChart"></canvas>
</section>

<footer>Built with ❤️ by FFlag Tracker • Updated automatically</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
fetch("history.json").then(r=>r.json()).then(data=>{
  const ctx=document.getElementById("trendChart").getContext("2d");
  new Chart(ctx,{
    type:'line',
    data:{
      labels:data.map(d=>d.date),
      datasets:[
        { label:'Added', data:data.map(d=>d.added), borderColor:'#34d399', backgroundColor:'rgba(52,211,153,0.2)', fill:true, tension:0.4 },
        { label:'Removed', data:data.map(d=>d.removed), borderColor:'#f87171', backgroundColor:'rgba(248,113,113,0.2)', fill:true, tension:0.4 }
      ]
    },
    options:{ responsive:true, plugins:{legend:{position:'top'}}, interaction:{mode:'nearest', axis:'x', intersect:false} }
  });
});

document.getElementById('searchInput').addEventListener('input',function(){
  const q=this.value.toLowerCase();
  const iframe=document.getElementById('reportFrame');
  const doc=iframe.contentDocument||iframe.contentWindow.document;
  doc.querySelectorAll('li').forEach(li=>{ li.style.display=li.textContent.toLowerCase().includes(q)?'':'none'; });
});
</script>
</body>
</html>
"""

# Save HTML content to the index.html file
with open("index.html", "w") as f:
    f.write(html_content)
